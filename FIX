// ================================
// Validate that selected PO starts with "PO"
// ================================
import com.kms.katalon.core.testobject.TestObject
import com.kms.katalon.core.testobject.ConditionType
import com.kms.katalon.core.util.KeywordUtil
import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI

// Locator for the selected PO tag (Vaadin dropdown tag)
TestObject poTag = new TestObject('poTag')
poTag.addProperty(
    'xpath',
    ConditionType.EQUALS,
    "(//div[contains(@class,'iv-selector')]//li[contains(@class,'iv-tag')]//*[self::a or self::span])[1]"
)

// Wait until PO tag is visible
WebUI.waitForElementVisible(poTag, 20)

// Get PO text
String poText = WebUI.getText(poTag).trim()
KeywordUtil.logInfo("Selected PO text: " + poText)

// Validate PO prefix
if (poText.startsWith("PO")) {
    KeywordUtil.markPassed("PO validation OK: " + poText)
} else {
    KeywordUtil.markFailedAndStop("PO validation FAILED. Found: " + poText)
}
